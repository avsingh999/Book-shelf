{"ast":null,"code":"import _classCallCheck from \"/home/avsingh999/x-men/book-shelf/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/avsingh999/x-men/book-shelf/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/avsingh999/x-men/book-shelf/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/avsingh999/x-men/book-shelf/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/avsingh999/x-men/book-shelf/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/avsingh999/x-men/book-shelf/frontend/src/hoc/auth.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { auth } from '../actions/index';\nexport default function (ComposedClass, reload) {\n  var AuthenticationCheck =\n  /*#__PURE__*/\n  function (_Component) {\n    _inherits(AuthenticationCheck, _Component);\n\n    function AuthenticationCheck() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, AuthenticationCheck);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuthenticationCheck)).call.apply(_getPrototypeOf2, [this].concat(args)));\n      _this.state = {\n        loading: true\n      };\n      return _this;\n    }\n\n    _createClass(AuthenticationCheck, [{\n      key: \"componentWillMount\",\n      value: function componentWillMount() {\n        this.props.dispatch(auth());\n      }\n    }, {\n      key: \"componentWillReceiveProps\",\n      value: function componentWillReceiveProps(nextProps) {\n        this.setState({\n          loading: false\n        });\n        console.log(nextProps);\n\n        if (!nextProps.user.login.data.isAuth) {\n          if (reload) {\n            this.props.history.push('/login');\n          }\n        } else {\n          if (reload === false) {\n            this.props.history.push('/user');\n          }\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        console.log(this.props);\n\n        if (this.state.loading) {\n          return React.createElement(\"div\", {\n            className: \"loader\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 30\n            },\n            __self: this\n          }, \"loading...\");\n        }\n\n        return React.createElement(ComposedClass, Object.assign({}, this.props, {\n          user: this.props.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }));\n      }\n    }]);\n\n    return AuthenticationCheck;\n  }(Component);\n\n  function mapStateToProps(state) {\n    return {\n      user: state.user\n    };\n  }\n\n  return connect(mapStateToProps)(AuthenticationCheck);\n}","map":{"version":3,"sources":["/home/avsingh999/x-men/book-shelf/frontend/src/hoc/auth.js"],"names":["React","Component","connect","auth","ComposedClass","reload","AuthenticationCheck","state","loading","props","dispatch","nextProps","setState","console","log","user","login","data","isAuth","history","push","mapStateToProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AAEA,eAAe,UAASC,aAAT,EAAwBC,MAAxB,EAA+B;AAAA,MACpCC,mBADoC;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,YAEtCC,KAFsC,GAE9B;AACJC,QAAAA,OAAO,EAAC;AADJ,OAF8B;AAAA;AAAA;;AAAA;AAAA;AAAA,2CAKlB;AAChB,aAAKC,KAAL,CAAWC,QAAX,CAAoBP,IAAI,EAAxB;AACH;AAPqC;AAAA;AAAA,gDAQZQ,SARY,EAQF;AAChC,aAAKC,QAAL,CAAc;AAACJ,UAAAA,OAAO,EAAC;AAAT,SAAd;AACIK,QAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ;;AACJ,YAAG,CAACA,SAAS,CAACI,IAAV,CAAeC,KAAf,CAAqBC,IAArB,CAA0BC,MAA9B,EAAqC;AACjC,cAAGb,MAAH,EAAU;AACN,iBAAKI,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH;AACJ,SAJD,MAKI;AACA,cAAGf,MAAM,KAAG,KAAZ,EAAkB;AACd,iBAAKI,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH;AACJ;AACJ;AArBqC;AAAA;AAAA,+BAsB7B;AACLP,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAjB;;AACA,YAAG,KAAKF,KAAL,CAAWC,OAAd,EAAsB;AAClB,iBAAO;AAAK,YAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAP;AACH;;AACD,eACE,oBAAC,aAAD,oBAAmB,KAAKC,KAAxB;AAA+B,UAAA,IAAI,EAAE,KAAKA,KAAL,CAAWM,IAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF;AAGD;AA9BmC;;AAAA;AAAA,IACRd,SADQ;;AAgC1C,WAASoB,eAAT,CAAyBd,KAAzB,EAA+B;AAC3B,WAAO;AACHQ,MAAAA,IAAI,EAACR,KAAK,CAACQ;AADR,KAAP;AAGH;;AACD,SAAOb,OAAO,CAACmB,eAAD,CAAP,CAAyBf,mBAAzB,CAAP;AACH","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\nimport {auth} from '../actions/index'\n\nexport default function(ComposedClass, reload){\n    class AuthenticationCheck extends Component {\n        state = {\n            loading:true\n        }\n        componentWillMount(){\n            this.props.dispatch(auth())\n        }\n        componentWillReceiveProps(nextProps){\n            this.setState({loading:false})\n                console.log(nextProps)\n            if(!nextProps.user.login.data.isAuth){\n                if(reload){\n                    this.props.history.push('/login')\n                }\n            }\n            else{\n                if(reload===false){\n                    this.props.history.push('/user')\n                }\n            }\n        }\n        render() {\n            console.log(this.props)\n            if(this.state.loading){\n                return <div className=\"loader\">loading...</div>\n            }\n            return (\n              <ComposedClass {...this.props} user={this.props.user}/>\n            )\n          }\n    }\n    function mapStateToProps(state){\n        return {\n            user:state.user\n        }\n    }\n    return connect(mapStateToProps)(AuthenticationCheck)\n}\n\n"]},"metadata":{},"sourceType":"module"}